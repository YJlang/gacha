# Spring Boot ë°±ì—”ë“œ ê°œë°œ ê°€ì´ë“œ

## í”„ë¡œì íŠ¸ ê°œìš”

### ì„œë¹„ìŠ¤ ì†Œê°œ
**ê°€ì±  ì—¬í–‰ ì„œë¹„ìŠ¤ (Gacha Travel Service)**ëŠ” ê³µê³µë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬ ì™œì†Œëœ ì§€ì—­ì´ë‚˜ íŠ¹ì • ì§€ì—­ì˜ ì—¬í–‰ ìƒí’ˆì„±ì„ ë†’ì´ê¸° ìœ„í•œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ê°€ì±  ì‹œìŠ¤í…œì„ í†µí•´ ëœë¤ìœ¼ë¡œ ì—¬í–‰ì§€ë¥¼ ì¶”ì²œë°›ê³ , ì´ë¥¼ ì»¬ë ‰ì…˜ìœ¼ë¡œ ëª¨ìœ¼ë©°, ì‹¤ì œ ë°©ë¬¸ í›„ ì¶”ì–µì„ ê¸°ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### í•µì‹¬ ê°€ì¹˜
- **ì§€ì—­ í™œì„±í™”**: ê³µê³µë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬ ëœ ì•Œë ¤ì§„ ì§€ì—­ì˜ ì—¬í–‰ì§€ë¥¼ ë°œêµ´í•˜ê³  í™ë³´
- **ì¬ë¯¸ìˆëŠ” ë°œê²¬**: ê°€ì±  ì‹œìŠ¤í…œì„ í†µí•´ ìš°ì—°í•œ ì—¬í–‰ì§€ ë°œê²¬ì˜ ì¦ê±°ì›€ ì œê³µ
- **ì¶”ì–µ ê¸°ë¡**: ì—¬í–‰ ê²½í—˜ì„ ê¸°ë¡í•˜ê³  ê³µìœ í•  ìˆ˜ ìˆëŠ” í”Œë«í¼ ì œê³µ

### ì£¼ìš” ê¸°ëŠ¥
1. **ê°€ì±  ì‹œìŠ¤í…œ**: í•˜ë£¨ 1íšŒ ëœë¤ ì—¬í–‰ì§€ ì¶”ì²œ (ì§€ì—­/í”„ë¡œê·¸ë¨ ìœ í˜• í•„í„°ë§ ê°€ëŠ¥)
2. **ì»¬ë ‰ì…˜**: ë½‘ì€ ì—¬í–‰ì§€ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬
3. **ì¶”ì–µ ê¸°ë¡**: ì‹¤ì œ ë°©ë¬¸ í›„ ì—¬í–‰ ì¶”ì–µì„ ì‘ì„±í•˜ê³  ê´€ë¦¬
4. **ë§ˆì´í˜ì´ì§€**: ë‚´ ì»¬ë ‰ì…˜ê³¼ ì¶”ì–µ í†µê³„ í™•ì¸

### íƒ€ê²Ÿ ì‚¬ìš©ì
- ìƒˆë¡œìš´ ì—¬í–‰ì§€ë¥¼ ì°¾ê³  ì‹¶ì€ ì‚¬ëŒ
- ëœ ì•Œë ¤ì§„ ì§€ì—­ì„ íƒí—˜í•˜ê³  ì‹¶ì€ ì‚¬ëŒ
- ì—¬í–‰ ì¶”ì–µì„ ê¸°ë¡í•˜ê³  ì‹¶ì€ ì‚¬ëŒ
- ê°€ì±  ì‹œìŠ¤í…œì˜ ì¬ë¯¸ë¥¼ ì¦ê¸°ê³  ì‹¶ì€ ì‚¬ëŒ

### ê¸°ìˆ  ìŠ¤íƒ
- **Backend**: Spring Boot 3.x, Java 17+
- **Database**: MySQL 8.0
- **ORM**: JPA/Hibernate
- **Build Tool**: Maven ë˜ëŠ” Gradle
- **ê¸°íƒ€**: Lombok, JWT, Apache Commons CSV

### ê°œë°œ ì›ì¹™
- **ë¹ ë¥¸ MVP ê°œë°œ ìš°ì„ **: í•´ì»¤í†¤ í™˜ê²½ì— ë§ì¶° ë¹ ë¥¸ í”„ë¡œí† íƒ€ì… ê°œë°œ
- **ë³´ì•ˆ ìµœì†Œí™”**: MVP ë‹¨ê³„ì—ì„œëŠ” ë³´ì•ˆë³´ë‹¤ ê¸°ëŠ¥ êµ¬í˜„ ìš°ì„ 
- **ê³µê³µë°ì´í„° í™œìš©**: CSV íŒŒì¼ì„ ë™ì ìœ¼ë¡œ ì½ì–´ì„œ ìµœì‹  ë°ì´í„° ì œê³µ
- **ì‚¬ìš©ì ê²½í—˜ ì¤‘ì‹¬**: ì§ê´€ì ì´ê³  ì¬ë¯¸ìˆëŠ” UX ì œê³µ

---

## ê°œë°œ í™˜ê²½ ì„¤ì •

### í•„ìˆ˜ ìš”êµ¬ì‚¬í•­
- JDK 17 ì´ìƒ
- MySQL 8.0 ì´ìƒ
- Spring Boot 3.x
- Maven ë˜ëŠ” Gradle

### ì˜ì¡´ì„± (pom.xml ë˜ëŠ” build.gradle)
```xml
<dependencies>
    <!-- Spring Boot Starter Web -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
    </dependency>
    
    <!-- Spring Boot Starter Data JPA -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-data-jpa</artifactId>
    </dependency>
    
    <!-- MySQL Driver -->
    <dependency>
        <groupId>com.mysql</groupId>
        <artifactId>mysql-connector-j</artifactId>
        <scope>runtime</scope>
    </dependency>
    
    <!-- Lombok -->
    <dependency>
        <groupId>org.projectlombok</groupId>
        <artifactId>lombok</artifactId>
        <optional>true</optional>
    </dependency>
    
    <!-- Validation -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-validation</artifactId>
    </dependency>
    
    <!-- JWT (ê°„ë‹¨í•œ í† í° ì¸ì¦ìš©) -->
    <dependency>
        <groupId>io.jsonwebtoken</groupId>
        <artifactId>jjwt-api</artifactId>
        <version>0.11.5</version>
    </dependency>
    <dependency>
        <groupId>io.jsonwebtoken</groupId>
        <artifactId>jjwt-impl</artifactId>
        <version>0.11.5</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>io.jsonwebtoken</groupId>
        <artifactId>jjwt-jackson</artifactId>
        <version>0.11.5</version>
        <scope>runtime</scope>
    </dependency>
    
    <!-- CSV íŒŒì‹±ì„ ìœ„í•œ Apache Commons CSV -->
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-csv</artifactId>
        <version>1.10.0</version>
    </dependency>
    
    <!-- ìºì‹±ì„ ìœ„í•œ Spring Cache -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-cache</artifactId>
    </dependency>
</dependencies>
```

### application.yml ì„¤ì •
```yaml
spring:
  application:
    name: gacha-travel-service
  
  datasource:
    url: jdbc:mysql://localhost:3306/gacha_travel?useSSL=false&serverTimezone=Asia/Seoul&characterEncoding=UTF-8
    username: root
    password: your_password
    driver-class-name: com.mysql.cj.jdbc.Driver
  
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.MySQL8Dialect
  
  jackson:
    serialization:
      write-dates-as-timestamps: false
    time-zone: Asia/Seoul
  
  cache:
    type: simple
    cache-names: villages

server:
  port: 8080

jwt:
  secret: your-secret-key-change-in-production
  expiration: 86400000 # 24ì‹œê°„ (ë°€ë¦¬ì´ˆ)

csv:
  file:
    path: classpath:data/ì „êµ­ë†ì–´ì´Œì²´í—˜íœ´ì–‘ë§ˆì„í‘œì¤€ë°ì´í„°.csv
    encoding: UTF-8
    cache:
      enabled: true
      ttl: 3600 # 1ì‹œê°„ (ì´ˆ)
```

---

## ì„œë¹„ìŠ¤ í”Œë¡œìš° ë° ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤

### ì£¼ìš” ì‚¬ìš©ì í”Œë¡œìš°

#### 1. ì‹ ê·œ ì‚¬ìš©ì ì˜¨ë³´ë”©
```
íšŒì›ê°€ì… â†’ ë¡œê·¸ì¸ â†’ ì˜¨ë³´ë”© í™”ë©´ â†’ ë©”ì¸ í™”ë©´
```

#### 2. ê°€ì±  ë½‘ê¸° í”Œë¡œìš°
```
ë©”ì¸ í™”ë©´ â†’ ê°€ì±  ë½‘ê¸° ë²„íŠ¼ í´ë¦­ â†’ ëœë¤ ì—¬í–‰ì§€ í‘œì‹œ â†’ 
ìƒì„¸ ì •ë³´ í™•ì¸ â†’ ì»¬ë ‰ì…˜ì— ì €ì¥ (ì„ íƒ) â†’ ì¶”ì–µ ì‘ì„± (ì„ íƒ)
```

#### 3. ì»¬ë ‰ì…˜ ê´€ë¦¬ í”Œë¡œìš°
```
ë§ˆì´í˜ì´ì§€ â†’ ë‚´ ì»¬ë ‰ì…˜ ì¡°íšŒ â†’ ì—¬í–‰ì§€ ìƒì„¸ ë³´ê¸° â†’ 
ì¶”ì–µ ì‘ì„± ë˜ëŠ” ì»¬ë ‰ì…˜ì—ì„œ ì œê±°
```

#### 4. ì¶”ì–µ ì‘ì„± í”Œë¡œìš°
```
ì—¬í–‰ì§€ ìƒì„¸ â†’ ì¶”ì–µ ì‘ì„± â†’ ë‚´ìš© ì…ë ¥ â†’ ì €ì¥ â†’ 
ë‚˜ì˜ ì¶”ì–µ ëª©ë¡ì—ì„œ í™•ì¸
```

### ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

#### ê°€ì±  ì‹œìŠ¤í…œ
- **í•˜ë£¨ 1íšŒ ì œí•œ**: ì‚¬ìš©ìëŠ” í•˜ë£¨ì— í•œ ë²ˆë§Œ ê°€ì± ë¥¼ ë½‘ì„ ìˆ˜ ìˆìŒ
- **ëœë¤ ì¶”ì²œ**: CSV íŒŒì¼ì˜ ëª¨ë“  ì—¬í–‰ì§€ ì¤‘ ëœë¤ìœ¼ë¡œ ì„ íƒ
- **í•„í„°ë§ ì˜µì…˜**: ì§€ì—­(ì‹œë„ëª…) ë˜ëŠ” í”„ë¡œê·¸ë¨ ìœ í˜•ìœ¼ë¡œ í•„í„°ë§ ê°€ëŠ¥
- **ì´ë ¥ ê´€ë¦¬**: ê°€ì±  ì´ë ¥ì„ ì €ì¥í•˜ì—¬ ì œí•œ í™•ì¸ ë° í†µê³„ í™œìš©

#### ì»¬ë ‰ì…˜ ì‹œìŠ¤í…œ
- **ì¤‘ë³µ ë°©ì§€**: ê°™ì€ ì—¬í–‰ì§€ëŠ” í•œ ë²ˆë§Œ ì»¬ë ‰ì…˜ì— ì¶”ê°€ ê°€ëŠ¥
- **í†µê³„ ì œê³µ**: ì§€ì—­ë³„ ì»¬ë ‰ì…˜ í†µê³„ ì œê³µ
- **ê´€ë¦¬ ê¸°ëŠ¥**: ì»¬ë ‰ì…˜ì—ì„œ ì œê±° ê°€ëŠ¥

#### ì¶”ì–µ ì‹œìŠ¤í…œ
- **ììœ  ì‘ì„±**: ì‚¬ìš©ìê°€ ììœ ë¡­ê²Œ ì—¬í–‰ ì¶”ì–µ ì‘ì„±
- **ë‚ ì§œ ê¸°ë¡**: ë°©ë¬¸ ë‚ ì§œ ê¸°ë¡ ê°€ëŠ¥
- **ìˆ˜ì •/ì‚­ì œ**: ì‘ì„±í•œ ì¶”ì–µ ìˆ˜ì • ë° ì‚­ì œ ê°€ëŠ¥

### ë°ì´í„° íë¦„

#### CSV ë°ì´í„° ì²˜ë¦¬
```
CSV íŒŒì¼ (resources/data/) â†’ VillageCsvReader â†’ 
ìºì‹± (ë©”ëª¨ë¦¬) â†’ VillageService â†’ API ì‘ë‹µ
```

#### ì‚¬ìš©ì ë°ì´í„° ì²˜ë¦¬
```
ì‚¬ìš©ì ìš”ì²­ â†’ Controller â†’ Service â†’ Repository â†’ 
MySQL Database â†’ ì‘ë‹µ
```

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/main/java/com/gacha/travel/
â”œâ”€â”€ GachaTravelApplication.java
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ JwtConfig.java
â”‚   â”œâ”€â”€ WebConfig.java
â”‚   â””â”€â”€ CacheConfig.java
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ user/
â”‚   â”‚   â”œâ”€â”€ User.java
â”‚   â”‚   â”œâ”€â”€ UserRepository.java
â”‚   â”‚   â””â”€â”€ UserService.java
â”‚   â”œâ”€â”€ village/
â”‚   â”‚   â”œâ”€â”€ VillageDto.java (CSVì—ì„œ ì½ì€ ë°ì´í„°ë¥¼ ë‹´ëŠ” DTO)
â”‚   â”‚   â”œâ”€â”€ VillageCsvReader.java (CSV íŒŒì¼ ì½ê¸°)
â”‚   â”‚   â””â”€â”€ VillageService.java (CSV ë°ì´í„° ì¡°íšŒ ì„œë¹„ìŠ¤)
â”‚   â”œâ”€â”€ collection/
â”‚   â”‚   â”œâ”€â”€ Collection.java
â”‚   â”‚   â”œâ”€â”€ CollectionRepository.java
â”‚   â”‚   â””â”€â”€ CollectionService.java
â”‚   â”œâ”€â”€ memory/
â”‚   â”‚   â”œâ”€â”€ Memory.java
â”‚   â”‚   â”œâ”€â”€ MemoryRepository.java
â”‚   â”‚   â””â”€â”€ MemoryService.java
â”‚   â””â”€â”€ gacha/
â”‚       â”œâ”€â”€ GachaHistory.java
â”‚       â”œâ”€â”€ GachaHistoryRepository.java
â”‚       â””â”€â”€ GachaService.java
â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ request/
â”‚   â”‚   â”œâ”€â”€ SignupRequest.java
â”‚   â”‚   â”œâ”€â”€ LoginRequest.java
â”‚   â”‚   â”œâ”€â”€ GachaDrawRequest.java
â”‚   â”‚   â”œâ”€â”€ CollectionRequest.java
â”‚   â”‚   â””â”€â”€ MemoryRequest.java
â”‚   â””â”€â”€ response/
â”‚       â”œâ”€â”€ ApiResponse.java
â”‚       â”œâ”€â”€ AuthResponse.java
â”‚       â”œâ”€â”€ VillageResponse.java
â”‚       â”œâ”€â”€ CollectionResponse.java
â”‚       â””â”€â”€ MemoryResponse.java
â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ AuthController.java
â”‚   â”œâ”€â”€ GachaController.java
â”‚   â”œâ”€â”€ VillageController.java
â”‚   â”œâ”€â”€ CollectionController.java
â”‚   â”œâ”€â”€ MemoryController.java
â”‚   â””â”€â”€ UserController.java
â”œâ”€â”€ util/
â”‚   â”œâ”€â”€ JwtUtil.java
â”‚   â””â”€â”€ PasswordUtil.java
â””â”€â”€ exception/
    â”œâ”€â”€ GlobalExceptionHandler.java
    â”œâ”€â”€ BusinessException.java
    â””â”€â”€ ErrorCode.java

src/main/resources/
â”œâ”€â”€ application.yml
â””â”€â”€ data/
    â””â”€â”€ ì „êµ­ë†ì–´ì´Œì²´í—˜íœ´ì–‘ë§ˆì„í‘œì¤€ë°ì´í„°.csv
```

---

## ê°œë°œ ê·œì¹™

### 1. Entity í´ë˜ìŠ¤ ì‘ì„± ê·œì¹™
- `@Entity` ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©
- `@Table(name = "table_name")` ëª…ì‹œ
- Lombok `@Getter`, `@Setter`, `@NoArgsConstructor`, `@AllArgsConstructor` ì‚¬ìš©
- `@Builder` íŒ¨í„´ ì ê·¹ í™œìš©
- `@CreatedDate`, `@LastModifiedDate` ì‚¬ìš© (BaseEntity ìƒì† ê¶Œì¥)
- `@Id`, `@GeneratedValue(strategy = GenerationType.IDENTITY)` ì‚¬ìš©

**ì˜ˆì‹œ:**
```java
@Entity
@Table(name = "users")
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long userId;
    
    @Column(nullable = false, unique = true, length = 50)
    private String username;
    
    @Column(nullable = false)
    private String password;
    
    @Column(nullable = false, unique = true)
    private String email;
    
    @CreatedDate
    @Column(nullable = false, updatable = false)
    private LocalDateTime createdAt;
}
```

### 2. Repository ì‘ì„± ê·œì¹™
- `JpaRepository<Entity, ID>` ìƒì†
- ë©”ì„œë“œ ë„¤ì´ë° ê·œì¹™ ì¤€ìˆ˜ (findBy, existsBy ë“±)
- `@Query` ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ë³µì¡í•œ ì¿¼ë¦¬ ì‘ì„±
- ì»¤ìŠ¤í…€ ì¿¼ë¦¬ëŠ” ê°€ëŠ¥í•œ í•œ ë©”ì„œë“œ ë„¤ì´ë°ìœ¼ë¡œ í•´ê²°

**ì˜ˆì‹œ:**
```java
@Repository
public interface UserRepository extends JpaRepository<User, Long> {
    Optional<User> findByUsername(String username);
    boolean existsByUsername(String username);
    boolean existsByEmail(String email);
    
    @Query("SELECT u FROM User u WHERE u.email = :email")
    Optional<User> findByEmail(@Param("email") String email);
}
```

### 3. DTO ì‘ì„± ê·œì¹™
- Request DTOëŠ” `@Valid` ì–´ë…¸í…Œì´ì…˜ê³¼ í•¨ê»˜ ì‚¬ìš©
- `@NotNull`, `@NotBlank`, `@Email`, `@Size` ë“± Validation ì–´ë…¸í…Œì´ì…˜ í™œìš©
- Lombok `@Getter`, `@Setter`, `@NoArgsConstructor`, `@AllArgsConstructor` ì‚¬ìš©
- `@Builder` íŒ¨í„´ ì‚¬ìš©

**ì˜ˆì‹œ:**
```java
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class SignupRequest {
    @NotBlank(message = "ì•„ì´ë””ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.")
    @Size(min = 3, max = 50, message = "ì•„ì´ë””ëŠ” 3ì ì´ìƒ 50ì ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.")
    private String username;
    
    @NotBlank(message = "ë¹„ë°€ë²ˆí˜¸ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.")
    @Size(min = 6, message = "ë¹„ë°€ë²ˆí˜¸ëŠ” 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.")
    private String password;
    
    @NotBlank(message = "ì´ë©”ì¼ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.")
    @Email(message = "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.")
    private String email;
}
```

### 4. Service ì‘ì„± ê·œì¹™
- `@Service` ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ Serviceì— êµ¬í˜„
- RepositoryëŠ” Serviceì—ì„œë§Œ ì‚¬ìš©
- íŠ¸ëœì­ì…˜ì€ `@Transactional` ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©
- ì˜ˆì™¸ëŠ” `BusinessException`ìœ¼ë¡œ ì²˜ë¦¬

**ì˜ˆì‹œ:**
```java
@Service
@RequiredArgsConstructor
@Transactional(readOnly = true)
public class UserService {
    private final UserRepository userRepository;
    private final PasswordUtil passwordUtil;
    
    @Transactional
    public UserResponse signup(SignupRequest request) {
        if (userRepository.existsByUsername(request.getUsername())) {
            throw new BusinessException(ErrorCode.USERNAME_ALREADY_EXISTS);
        }
        
        if (userRepository.existsByEmail(request.getEmail())) {
            throw new BusinessException(ErrorCode.EMAIL_ALREADY_EXISTS);
        }
        
        String encodedPassword = passwordUtil.encode(request.getPassword());
        
        User user = User.builder()
                .username(request.getUsername())
                .password(encodedPassword)
                .email(request.getEmail())
                .build();
        
        User savedUser = userRepository.save(user);
        return UserResponse.from(savedUser);
    }
}
```

### 5. Controller ì‘ì„± ê·œì¹™
- `@RestController` ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©
- `@RequestMapping("/api/...")`ë¡œ API ê²½ë¡œ ëª…ì‹œ
- `@Valid` ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ Request DTO ê²€ì¦
- ëª¨ë“  ì‘ë‹µì€ `ApiResponse<T>`ë¡œ ë˜í•‘
- HTTP ìƒíƒœ ì½”ë“œ ëª…ì‹œ (`@ResponseStatus` ë˜ëŠ” ResponseEntity ì‚¬ìš©)

**ì˜ˆì‹œ:**
```java
@RestController
@RequestMapping("/api/auth")
@RequiredArgsConstructor
public class AuthController {
    private final AuthService authService;
    
    @PostMapping("/signup")
    @ResponseStatus(HttpStatus.CREATED)
    public ApiResponse<AuthResponse> signup(@Valid @RequestBody SignupRequest request) {
        AuthResponse response = authService.signup(request);
        return ApiResponse.success(response, "íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
    }
    
    @PostMapping("/login")
    public ApiResponse<AuthResponse> login(@Valid @RequestBody LoginRequest request) {
        AuthResponse response = authService.login(request);
        return ApiResponse.success(response, "ë¡œê·¸ì¸ ì„±ê³µ");
    }
}
```

### 6. ê³µí†µ ì‘ë‹µ í˜•ì‹
- ëª¨ë“  API ì‘ë‹µì€ `ApiResponse<T>`ë¡œ í†µì¼
- ì„±ê³µ/ì‹¤íŒ¨ ì—¬ë¶€ëŠ” `success` í•„ë“œë¡œ êµ¬ë¶„
- ë°ì´í„°ëŠ” `data` í•„ë“œì— í¬í•¨
- ë©”ì‹œì§€ëŠ” `message` í•„ë“œì— í¬í•¨

**ì˜ˆì‹œ:**
```java
@Getter
@Builder
public class ApiResponse<T> {
    private boolean success;
    private String message;
    private T data;
    
    public static <T> ApiResponse<T> success(T data) {
        return ApiResponse.<T>builder()
                .success(true)
                .data(data)
                .build();
    }
    
    public static <T> ApiResponse<T> success(T data, String message) {
        return ApiResponse.<T>builder()
                .success(true)
                .message(message)
                .data(data)
                .build();
    }
    
    public static <T> ApiResponse<T> error(String message, String error) {
        return ApiResponse.<T>builder()
                .success(false)
                .message(message)
                .error(error)
                .build();
    }
}
```

### 7. ì˜ˆì™¸ ì²˜ë¦¬ ê·œì¹™
- ì»¤ìŠ¤í…€ ì˜ˆì™¸ëŠ” `BusinessException` ì‚¬ìš©
- `@ControllerAdvice`ë¡œ ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬
- ì—ëŸ¬ ì½”ë“œëŠ” `ErrorCode` enumìœ¼ë¡œ ê´€ë¦¬

**ì˜ˆì‹œ:**
```java
@Getter
@AllArgsConstructor
public enum ErrorCode {
    USERNAME_ALREADY_EXISTS("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤.", "USERNAME_ALREADY_EXISTS"),
    EMAIL_ALREADY_EXISTS("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤.", "EMAIL_ALREADY_EXISTS"),
    INVALID_CREDENTIALS("ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.", "INVALID_CREDENTIALS"),
    VILLAGE_NOT_FOUND("ì—¬í–‰ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", "VILLAGE_NOT_FOUND"),
    ALREADY_COLLECTED("ì´ë¯¸ ì»¬ë ‰ì…˜ì— ì¶”ê°€ëœ ì—¬í–‰ì§€ì…ë‹ˆë‹¤.", "ALREADY_COLLECTED"),
    DAILY_LIMIT_EXCEEDED("ì˜¤ëŠ˜ ê°€ì±  íšŸìˆ˜ë¥¼ ëª¨ë‘ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.", "DAILY_LIMIT_EXCEEDED"),
    NO_VILLAGES_AVAILABLE("ì¡°ê±´ì— ë§ëŠ” ì—¬í–‰ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.", "NO_VILLAGES_AVAILABLE"),
    CSV_READ_ERROR("CSV íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", "CSV_READ_ERROR");
    
    private final String message;
    private final String code;
}

@Getter
public class BusinessException extends RuntimeException {
    private final ErrorCode errorCode;
    
    public BusinessException(ErrorCode errorCode) {
        super(errorCode.getMessage());
        this.errorCode = errorCode;
    }
}

@ControllerAdvice
@Slf4j
public class GlobalExceptionHandler {
    
    @ExceptionHandler(BusinessException.class)
    public ResponseEntity<ApiResponse<?>> handleBusinessException(BusinessException e) {
        log.error("BusinessException: {}", e.getMessage());
        ApiResponse<?> response = ApiResponse.error(
            e.getErrorCode().getMessage(),
            e.getErrorCode().getCode()
        );
        return ResponseEntity.badRequest().body(response);
    }
    
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public ResponseEntity<ApiResponse<?>> handleValidationException(MethodArgumentNotValidException e) {
        String message = e.getBindingResult().getAllErrors().get(0).getDefaultMessage();
        ApiResponse<?> response = ApiResponse.error(message, "VALIDATION_ERROR");
        return ResponseEntity.badRequest().body(response);
    }
}
```

### 8. JWT ì¸ì¦ (ê°„ë‹¨í•œ êµ¬í˜„)
- Spring Security ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
- ê°„ë‹¨í•œ JWT í† í° ê¸°ë°˜ ì¸ì¦
- `@RequestHeader("Authorization")`ë¡œ í† í° ë°›ê¸°
- í† í° ê²€ì¦ì€ Interceptor ë˜ëŠ” Filterì—ì„œ ì²˜ë¦¬ (ì„ íƒì‚¬í•­)

**ì˜ˆì‹œ:**
```java
@Component
@RequiredArgsConstructor
public class JwtUtil {
    @Value("${jwt.secret}")
    private String secret;
    
    @Value("${jwt.expiration}")
    private Long expiration;
    
    public String generateToken(Long userId, String username) {
        Date now = new Date();
        Date expiryDate = new Date(now.getTime() + expiration);
        
        return Jwts.builder()
                .setSubject(String.valueOf(userId))
                .claim("username", username)
                .setIssuedAt(now)
                .setExpiration(expiryDate)
                .signWith(SignatureAlgorithm.HS512, secret)
                .compact();
    }
    
    public Long getUserIdFromToken(String token) {
        Claims claims = Jwts.parser()
                .setSigningKey(secret)
                .parseClaimsJws(token)
                .getBody();
        
        return Long.parseLong(claims.getSubject());
    }
    
    public boolean validateToken(String token) {
        try {
            Jwts.parser().setSigningKey(secret).parseClaimsJws(token);
            return true;
        } catch (JwtException | IllegalArgumentException e) {
            return false;
        }
    }
}
```

### 9. ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”
- Spring Securityì˜ BCrypt ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
- ê°„ë‹¨í•œ í•´ì‹œ í•¨ìˆ˜ ì‚¬ìš© (ì˜ˆ: SHA-256) ë˜ëŠ” ê°„ë‹¨í•œ BCrypt ì§ì ‘ êµ¬í˜„

**ì˜ˆì‹œ:**
```java
@Component
public class PasswordUtil {
    
    public String encode(String rawPassword) {
        // ê°„ë‹¨í•œ í•´ì‹œ (ì‹¤ì œë¡œëŠ” BCrypt ê¶Œì¥í•˜ì§€ë§Œ MVPì´ë¯€ë¡œ ê°„ë‹¨í•˜ê²Œ)
        try {
            MessageDigest md = MessageDigest.getInstance("SHA-256");
            byte[] hash = md.digest(rawPassword.getBytes(StandardCharsets.UTF_8));
            return Base64.getEncoder().encodeToString(hash);
        } catch (NoSuchAlgorithmException e) {
            throw new RuntimeException("Password encoding failed", e);
        }
    }
    
    public boolean matches(String rawPassword, String encodedPassword) {
        return encode(rawPassword).equals(encodedPassword);
    }
}
```

### 10. ê°€ì±  ë¡œì§ êµ¬í˜„
- í•˜ë£¨ 1íšŒ ì œí•œ (ë˜ëŠ” ì—¬ëŸ¬ ë²ˆ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •)
- CSV íŒŒì¼ì—ì„œ ëœë¤ìœ¼ë¡œ Village ì„ íƒ
- í•„í„°ë§ ì˜µì…˜ ì§€ì› (ì§€ì—­, í”„ë¡œê·¸ë¨ ìœ í˜•)
- ê°€ì±  ì´ë ¥ ì €ì¥

**ì˜ˆì‹œ:**
```java
@Service
@RequiredArgsConstructor
@Transactional(readOnly = true)
public class GachaService {
    private final VillageService villageService;
    private final GachaHistoryRepository gachaHistoryRepository;
    
    @Transactional
    public VillageResponse drawGacha(Long userId, GachaDrawRequest request) {
        // ì˜¤ëŠ˜ ê°€ì±  íšŸìˆ˜ í™•ì¸
        LocalDateTime todayStart = LocalDateTime.now().withHour(0).withMinute(0).withSecond(0);
        long todayCount = gachaHistoryRepository.countByUserIdAndDrawnAtAfter(userId, todayStart);
        
        if (todayCount >= 1) { // í•˜ë£¨ 1íšŒ ì œí•œ
            throw new BusinessException(ErrorCode.DAILY_LIMIT_EXCEEDED);
        }
        
        // CSV íŒŒì¼ì—ì„œ ëœë¤ ì—¬í–‰ì§€ ì„ íƒ
        VillageDto selectedVillage = villageService.getRandomVillage(
            request.getRegion(), 
            request.getProgramType()
        );
        
        // ê°€ì±  ì´ë ¥ ì €ì¥
        GachaHistory history = GachaHistory.builder()
                .userId(userId)
                .villageId(selectedVillage.getVillageId())
                .drawnAt(LocalDateTime.now())
                .build();
        gachaHistoryRepository.save(history);
        
        return VillageResponse.from(selectedVillage);
    }
}
```

---

## ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### users í…Œì´ë¸”
```sql
CREATE TABLE users (
    user_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
);
```

### villages í…Œì´ë¸” (ì‚¬ìš©í•˜ì§€ ì•ŠìŒ)
**ì°¸ê³ **: Village ë°ì´í„°ëŠ” CSV íŒŒì¼ì—ì„œ ë™ì ìœ¼ë¡œ ì½ì–´ì˜¤ë¯€ë¡œ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì´ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
ë‹¨, Collectionê³¼ Memoryì—ì„œ villageIdë¥¼ ì°¸ì¡°í•˜ë¯€ë¡œ, villageIdëŠ” CSV íŒŒì¼ì˜ ì¸ë±ìŠ¤ ê¸°ë°˜ IDë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

### collections í…Œì´ë¸”
```sql
CREATE TABLE collections (
    collection_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id BIGINT NOT NULL,
    village_id BIGINT NOT NULL, -- CSV íŒŒì¼ì˜ villageId ì°¸ì¡°
    collected_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE,
    UNIQUE KEY unique_user_village (user_id, village_id)
);
-- ì£¼ì˜: village_idëŠ” CSV íŒŒì¼ì˜ IDë¥¼ ì°¸ì¡°í•˜ë¯€ë¡œ ì™¸ë˜í‚¤ ì œì•½ì¡°ê±´ ì—†ìŒ
```

### memories í…Œì´ë¸”
```sql
CREATE TABLE memories (
    memory_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id BIGINT NOT NULL,
    village_id BIGINT NOT NULL, -- CSV íŒŒì¼ì˜ villageId ì°¸ì¡°
    content TEXT NOT NULL,
    visit_date DATE,
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE
);
-- ì£¼ì˜: village_idëŠ” CSV íŒŒì¼ì˜ IDë¥¼ ì°¸ì¡°í•˜ë¯€ë¡œ ì™¸ë˜í‚¤ ì œì•½ì¡°ê±´ ì—†ìŒ
```

### gacha_history í…Œì´ë¸”
```sql
CREATE TABLE gacha_history (
    gacha_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id BIGINT NOT NULL,
    village_id BIGINT NOT NULL, -- CSV íŒŒì¼ì˜ villageId ì°¸ì¡°
    drawn_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE
);
-- ì£¼ì˜: village_idëŠ” CSV íŒŒì¼ì˜ IDë¥¼ ì°¸ì¡°í•˜ë¯€ë¡œ ì™¸ë˜í‚¤ ì œì•½ì¡°ê±´ ì—†ìŒ
```

---

## CSV íŒŒì¼ ë™ì  ì½ê¸°

### CSV íŒŒì¼ ìœ„ì¹˜
- **íŒŒì¼ ê²½ë¡œ**: `src/main/resources/data/ì „êµ­ë†ì–´ì´Œì²´í—˜íœ´ì–‘ë§ˆì„í‘œì¤€ë°ì´í„°.csv`
- CSV íŒŒì¼ì„ í”„ë¡œì íŠ¸ì˜ `resources/data` í´ë”ì— ì €ì¥
- ë¹Œë“œ ì‹œ JAR íŒŒì¼ì— í¬í•¨ë˜ì–´ ë°°í¬ë¨

### CSV íŒŒì¼ êµ¬ì¡°
- ì¸ì½”ë”©: UTF-8 (BOM ì œê±° í•„ìš”í•  ìˆ˜ ìˆìŒ)
- ì»¬ëŸ¼ ìˆœì„œ (ì˜ˆìƒ):
  1. ë§ˆì„ëª…
  2. ì‹œë„ëª…
  3. ì‹œêµ°êµ¬ëª…
  4. ì²´í—˜í”„ë¡œê·¸ë¨ëª…
  5. ì²´í—˜í”„ë¡œê·¸ë¨ë‚´ìš©
  6. ì£¼ì†Œ
  7. ì „í™”ë²ˆí˜¸
  8. ìœ„ë„
  9. ê²½ë„
  10. ê¸°íƒ€...

### VillageDto í´ë˜ìŠ¤
```java
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class VillageDto {
    private Long villageId; // CSV ì¸ë±ìŠ¤ ê¸°ë°˜ ID
    private String villageName; // ë§ˆì„ëª…
    private String sidoName; // ì‹œë„ëª…
    private String sigunguName; // ì‹œêµ°êµ¬ëª…
    private String address; // ì£¼ì†Œ
    private String phoneNumber; // ì „í™”ë²ˆí˜¸
    private Double latitude; // ìœ„ë„
    private Double longitude; // ê²½ë„
    private String programName; // ì²´í—˜í”„ë¡œê·¸ë¨ëª…
    private String programContent; // ì²´í—˜í”„ë¡œê·¸ë¨ë‚´ìš©
}
```

### CSV Reader êµ¬í˜„
```java
@Component
@Slf4j
public class VillageCsvReader {
    
    @Value("${csv.file.path}")
    private String csvFilePath;
    
    @Value("${csv.file.encoding:UTF-8}")
    private String encoding;
    
    /**
     * CSV íŒŒì¼ì—ì„œ ëª¨ë“  ë§ˆì„ ë°ì´í„°ë¥¼ ì½ì–´ì˜´
     * ìºì‹±ì„ ì‚¬ìš©í•˜ì—¬ ì„±ëŠ¥ ìµœì í™”
     */
    @Cacheable(value = "villages", key = "'all'")
    public List<VillageDto> readAllVillages() {
        log.info("Reading CSV file: {}", csvFilePath);
        
        List<VillageDto> villages = new ArrayList<>();
        
        try {
            Resource resource = new ClassPathResource(csvFilePath.replace("classpath:", ""));
            InputStream inputStream = resource.getInputStream();
            
            // BOM ì œê±°ë¥¼ ìœ„í•œ ì²˜ë¦¬
            BufferedReader reader = new BufferedReader(
                new InputStreamReader(inputStream, encoding)
            );
            
            // ì²« ë²ˆì§¸ ì¤„ ì½ê¸° (BOM ì œê±°)
            String firstLine = reader.readLine();
            if (firstLine != null && firstLine.startsWith("\uFEFF")) {
                firstLine = firstLine.substring(1);
            }
            
            // CSV íŒŒì„œ ì„¤ì •
            CSVParser parser = CSVFormat.DEFAULT
                .withHeader() // ì²« ì¤„ì„ í—¤ë”ë¡œ ì‚¬ìš©
                .withIgnoreHeaderCase()
                .withTrim()
                .parse(new StringReader(firstLine + "\n" + reader.lines().collect(Collectors.joining("\n"))));
            
            long id = 1;
            for (CSVRecord record : parser) {
                try {
                    VillageDto village = VillageDto.builder()
                        .villageId(id++)
                        .villageName(getValue(record, "ë§ˆì„ëª…"))
                        .sidoName(getValue(record, "ì‹œë„ëª…"))
                        .sigunguName(getValue(record, "ì‹œêµ°êµ¬ëª…"))
                        .address(getValue(record, "ì£¼ì†Œ"))
                        .phoneNumber(getValue(record, "ì „í™”ë²ˆí˜¸"))
                        .latitude(parseDouble(getValue(record, "ìœ„ë„")))
                        .longitude(parseDouble(getValue(record, "ê²½ë„")))
                        .programName(getValue(record, "ì²´í—˜í”„ë¡œê·¸ë¨ëª…"))
                        .programContent(getValue(record, "ì²´í—˜í”„ë¡œê·¸ë¨ë‚´ìš©"))
                        .build();
                    
                    villages.add(village);
                } catch (Exception e) {
                    log.warn("Failed to parse CSV record: {}", e.getMessage());
                }
            }
            
            log.info("Successfully loaded {} villages from CSV", villages.size());
            
        } catch (IOException e) {
            log.error("Failed to read CSV file: {}", e.getMessage(), e);
            throw new BusinessException(ErrorCode.CSV_READ_ERROR);
        }
        
        return villages;
    }
    
    /**
     * í•„í„°ë§ëœ ë§ˆì„ ë°ì´í„° ì¡°íšŒ
     */
    public List<VillageDto> getFilteredVillages(String region, String programType) {
        List<VillageDto> allVillages = readAllVillages();
        
        return allVillages.stream()
            .filter(v -> region == null || v.getSidoName().contains(region))
            .filter(v -> programType == null || 
                (v.getProgramName() != null && v.getProgramName().contains(programType)))
            .collect(Collectors.toList());
    }
    
    /**
     * IDë¡œ ë§ˆì„ ì¡°íšŒ
     */
    public Optional<VillageDto> findById(Long villageId) {
        return readAllVillages().stream()
            .filter(v -> v.getVillageId().equals(villageId))
            .findFirst();
    }
    
    private String getValue(CSVRecord record, String columnName) {
        try {
            String value = record.get(columnName);
            return value != null && !value.trim().isEmpty() ? value.trim() : null;
        } catch (IllegalArgumentException e) {
            // ì»¬ëŸ¼ì´ ì—†ëŠ” ê²½ìš° null ë°˜í™˜
            return null;
        }
    }
    
    private Double parseDouble(String value) {
        if (value == null || value.trim().isEmpty()) {
            return null;
        }
        try {
            return Double.parseDouble(value.trim());
        } catch (NumberFormatException e) {
            return null;
        }
    }
}
```

### VillageService ìˆ˜ì •
```java
@Service
@RequiredArgsConstructor
@Slf4j
public class VillageService {
    private final VillageCsvReader csvReader;
    
    /**
     * ëª¨ë“  ë§ˆì„ ì¡°íšŒ (í˜ì´ì§€ë„¤ì´ì…˜)
     */
    public Page<VillageDto> getAllVillages(String region, String programType, Pageable pageable) {
        List<VillageDto> filteredVillages = csvReader.getFilteredVillages(region, programType);
        
        int start = (int) pageable.getOffset();
        int end = Math.min((start + pageable.getPageSize()), filteredVillages.size());
        List<VillageDto> pageContent = filteredVillages.subList(start, end);
        
        return new PageImpl<>(pageContent, pageable, filteredVillages.size());
    }
    
    /**
     * IDë¡œ ë§ˆì„ ì¡°íšŒ
     */
    public VillageDto getVillageById(Long villageId) {
        return csvReader.findById(villageId)
            .orElseThrow(() -> new BusinessException(ErrorCode.VILLAGE_NOT_FOUND));
    }
    
    /**
     * ëœë¤ ë§ˆì„ ì„ íƒ (ê°€ì± ìš©)
     */
    public VillageDto getRandomVillage(String region, String programType) {
        List<VillageDto> villages = csvReader.getFilteredVillages(region, programType);
        
        if (villages.isEmpty()) {
            throw new BusinessException(ErrorCode.NO_VILLAGES_AVAILABLE);
        }
        
        Random random = new Random();
        return villages.get(random.nextInt(villages.size()));
    }
}
```

### CacheConfig ì„¤ì •
```java
@Configuration
@EnableCaching
public class CacheConfig {
    
    @Bean
    public CacheManager cacheManager() {
        SimpleCacheManager cacheManager = new SimpleCacheManager();
        cacheManager.setCaches(Arrays.asList(
            new ConcurrentMapCache("villages")
        ));
        return cacheManager;
    }
}
```

### ìºì‹œ ë¬´íš¨í™” (ì„ íƒì‚¬í•­)
CSV íŒŒì¼ì´ ì—…ë°ì´íŠ¸ëœ ê²½ìš° ìºì‹œë¥¼ ë¬´íš¨í™”í•˜ë ¤ë©´:
```java
@Service
@RequiredArgsConstructor
public class VillageService {
    private final VillageCsvReader csvReader;
    private final CacheManager cacheManager;
    
    @CacheEvict(value = "villages", allEntries = true)
    public void refreshCache() {
        log.info("Village cache cleared");
    }
}
```

### CSV íŒŒì¼ ì—…ë¡œë“œ (ì„ íƒì‚¬í•­)
ëŸ°íƒ€ì„ì— CSV íŒŒì¼ì„ ì—…ë°ì´íŠ¸í•˜ê³  ì‹¶ë‹¤ë©´:
```java
@RestController
@RequestMapping("/api/admin")
@RequiredArgsConstructor
public class AdminController {
    private final VillageCsvReader csvReader;
    private final CacheManager cacheManager;
    
    @PostMapping("/csv/upload")
    public ApiResponse<String> uploadCsv(@RequestParam("file") MultipartFile file) {
        // íŒŒì¼ì„ resources/data í´ë”ì— ì €ì¥
        // ìºì‹œ ë¬´íš¨í™”
        cacheManager.getCache("villages").clear();
        return ApiResponse.success("CSV íŒŒì¼ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }
}
```

### ì£¼ì˜ì‚¬í•­
1. **CSV íŒŒì¼ ì¸ì½”ë”©**: UTF-8ë¡œ ì €ì¥ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸ (BOM ì œê±° í•„ìš”í•  ìˆ˜ ìˆìŒ)
2. **ì»¬ëŸ¼ëª… í™•ì¸**: ì‹¤ì œ CSV íŒŒì¼ì˜ í—¤ë” ì»¬ëŸ¼ëª…ì„ í™•ì¸í•˜ì—¬ `getValue()` ë©”ì„œë“œ ìˆ˜ì •
3. **ì„±ëŠ¥**: ìºì‹±ì„ ì‚¬ìš©í•˜ì—¬ ë§¤ë²ˆ íŒŒì¼ì„ ì½ì§€ ì•Šë„ë¡ ìµœì í™”
4. **ë©”ëª¨ë¦¬**: CSV íŒŒì¼ì´ ë§¤ìš° í° ê²½ìš° ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ ê³ ë ¤
5. **ì—ëŸ¬ ì²˜ë¦¬**: CSV íŒŒì‹± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí•´ë„ ë‹¤ë¥¸ ë ˆì½”ë“œëŠ” ê³„ì† ì²˜ë¦¬

---

## ê°œë°œ ì²´í¬ë¦¬ìŠ¤íŠ¸

### í•„ìˆ˜ êµ¬í˜„ í•­ëª©
- [ ] User ì—”í‹°í‹° ë° Repository
- [ ] VillageDto ë° VillageCsvReader (CSV íŒŒì¼ ì½ê¸°)
- [ ] VillageService (CSV ë°ì´í„° ì¡°íšŒ ì„œë¹„ìŠ¤)
- [ ] Collection ì—”í‹°í‹° ë° Repository
- [ ] Memory ì—”í‹°í‹° ë° Repository
- [ ] GachaHistory ì—”í‹°í‹° ë° Repository
- [ ] íšŒì›ê°€ì… API
- [ ] ë¡œê·¸ì¸ API
- [ ] ê°€ì±  ë½‘ê¸° API
- [ ] ì—¬í–‰ì§€ ì¡°íšŒ API
- [ ] ì»¬ë ‰ì…˜ ì¶”ê°€/ì¡°íšŒ/ì‚­ì œ API
- [ ] ì¶”ì–µ ì‘ì„±/ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œ API
- [ ] ë§ˆì´í˜ì´ì§€ API
- [ ] ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬
- [ ] CSV íŒŒì¼ì„ resources/data í´ë”ì— ì €ì¥
- [ ] ìºì‹± ì„¤ì •

### ì„ íƒ êµ¬í˜„ í•­ëª©
- [ ] JWT í† í° ê²€ì¦ Interceptor
- [ ] í˜ì´ì§€ë„¤ì´ì…˜
- [ ] ê²€ìƒ‰ ê¸°ëŠ¥
- [ ] í†µê³„ API

---

## ì£¼ì˜ì‚¬í•­

1. **ë³´ì•ˆ ìµœì†Œí™”**: MVP ê°œë°œì´ë¯€ë¡œ ë³´ì•ˆì€ ìµœì†Œí™” (ë¹„ë°€ë²ˆí˜¸ ë‹¨ìˆœ í•´ì‹œ, JWT ê°„ë‹¨ êµ¬í˜„)
2. **ë¹ ë¥¸ ê°œë°œ**: ë³µì¡í•œ ë¡œì§ë³´ë‹¤ëŠ” ë¹ ë¥¸ êµ¬í˜„ ìš°ì„ 
3. **ì¼ê´€ì„±**: ëª¨ë“  APIëŠ” ë™ì¼í•œ ì‘ë‹µ í˜•ì‹ ì‚¬ìš©
4. **ì—ëŸ¬ ì²˜ë¦¬**: ëª¨ë“  ì˜ˆì™¸ëŠ” ì ì ˆí•œ ì—ëŸ¬ ë©”ì‹œì§€ì™€ í•¨ê»˜ ì²˜ë¦¬
5. **ë¡œê¹…**: ì¤‘ìš”í•œ ë¡œì§ì—ëŠ” ë¡œê·¸ ì¶”ê°€ (`@Slf4j` ì‚¬ìš©)

---

## í…ŒìŠ¤íŠ¸

### Postman í…ŒìŠ¤íŠ¸
1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (`baseUrl`, `token`)
2. íšŒì›ê°€ì… â†’ ë¡œê·¸ì¸ â†’ í† í° ì €ì¥
3. ê° API ìˆœì°¨ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸

### ë¡œì»¬ í…ŒìŠ¤íŠ¸
```bash
# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
./mvnw spring-boot:run

# ë˜ëŠ”
java -jar target/gacha-travel-service-0.0.1-SNAPSHOT.jar
```

---

## ì¶”ê°€ ì°¸ê³ ì‚¬í•­

### ê¸°ìˆ ì  ì£¼ì˜ì‚¬í•­
- ëª¨ë“  ë‚ ì§œ/ì‹œê°„ì€ `LocalDateTime`, `LocalDate` ì‚¬ìš©
- ì‹œê°„ëŒ€ëŠ” `Asia/Seoul` ì‚¬ìš©
- ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ìŠ¤ëŠ” í•„ìš”ì‹œ ì¶”ê°€ (username, email ë“±)
- N+1 ë¬¸ì œ ì£¼ì˜ (JPA ì¿¼ë¦¬ ìµœì í™”)
- **CSV íŒŒì¼ì€ `src/main/resources/data/` í´ë”ì— ì €ì¥**
- **CSV íŒŒì¼ì€ ìºì‹±ë˜ì–´ ì„±ëŠ¥ ìµœì í™”ë¨**
- **CSV íŒŒì¼ì˜ ì»¬ëŸ¼ëª…ì€ ì‹¤ì œ íŒŒì¼ì˜ í—¤ë”ì™€ ì¼ì¹˜í•´ì•¼ í•¨**
- **villageIdëŠ” CSV íŒŒì¼ì˜ ì¸ë±ìŠ¤ ê¸°ë°˜ ID ì‚¬ìš© (1ë¶€í„° ì‹œì‘)**

### ê¸°íšì  ê³ ë ¤ì‚¬í•­

#### ì‚¬ìš©ì ê²½í—˜ (UX)
- **ê°€ì± ì˜ ì¬ë¯¸**: ëœë¤ ì¶”ì²œìœ¼ë¡œ ìƒˆë¡œìš´ ì—¬í–‰ì§€ ë°œê²¬ì˜ ì¦ê±°ì›€ ì œê³µ
- **ìˆ˜ì§‘ì˜ ì¬ë¯¸**: ì»¬ë ‰ì…˜ì„ ëª¨ìœ¼ëŠ” ê²Œì„í™” ìš”ì†Œ
- **ì¶”ì–µì˜ ê°€ì¹˜**: ì—¬í–‰ ê²½í—˜ì„ ê¸°ë¡í•˜ê³  ë˜ëŒì•„ë³¼ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥

#### ë°ì´í„° í™œìš©
- **ê³µê³µë°ì´í„° í™œìš©**: ì „êµ­ë†ì–´ì´Œì²´í—˜íœ´ì–‘ë§ˆì„ í‘œì¤€ë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬ ì‹¤ì œ ì—¬í–‰ì§€ ì •ë³´ ì œê³µ
- **ì§€ì—­ ê· í˜•**: ëœ ì•Œë ¤ì§„ ì§€ì—­ì˜ ì—¬í–‰ì§€ë„ ë™ë“±í•œ í™•ë¥ ë¡œ ì¶”ì²œ
- **ìµœì‹  ì •ë³´**: CSV íŒŒì¼ì„ ë™ì ìœ¼ë¡œ ì½ì–´ ìµœì‹  ë°ì´í„° ë°˜ì˜ ê°€ëŠ¥

#### í™•ì¥ ê°€ëŠ¥ì„±
- **ì†Œì…œ ê¸°ëŠ¥**: ì¶”ì–µ ê³µìœ , ë‹¤ë¥¸ ì‚¬ìš©ìì˜ ì»¬ë ‰ì…˜ ë³´ê¸°
- **ì¶”ì²œ ì‹œìŠ¤í…œ**: ì‚¬ìš©ì ì„ í˜¸ë„ ê¸°ë°˜ ë§ì¶¤ ì¶”ì²œ
- **ë¦¬ë·° ì‹œìŠ¤í…œ**: ì—¬í–‰ì§€ì— ëŒ€í•œ ë¦¬ë·° ë° í‰ì 
- **í†µê³„ ëŒ€ì‹œë³´ë“œ**: ì§€ì—­ë³„ ì¸ê¸° ì—¬í–‰ì§€, ë°©ë¬¸ í†µê³„ ë“±

#### ì œì•½ì‚¬í•­ (MVP)
- **ë³´ì•ˆ ìµœì†Œí™”**: ë¹ ë¥¸ ê°œë°œì„ ìœ„í•´ ë³´ì•ˆ ê¸°ëŠ¥ ìµœì†Œí™”
- **ê¸°ë³¸ ê¸°ëŠ¥ ìš°ì„ **: í•µì‹¬ ê¸°ëŠ¥(ê°€ì± , ì»¬ë ‰ì…˜, ì¶”ì–µ)ì— ì§‘ì¤‘
- **ë‹¨ìˆœí•œ ì¸ì¦**: ë³µì¡í•œ OAuth ë“±ì€ ì œì™¸í•˜ê³  ê¸°ë³¸ ë¡œê·¸ì¸ë§Œ ì œê³µ

---

## ERD ë‹¤ì´ì–´ê·¸ë¨

í”„ë¡œì íŠ¸ì˜ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°ëŠ” `ERD.dbml` íŒŒì¼ì„ ì°¸ê³ í•˜ì„¸ìš”.
[dbdiagram.io](https://dbdiagram.io)ì—ì„œ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ¯ í”„ë¡œì íŠ¸ êµ¬í˜„ í˜„í™© (2025-11-18 ê¸°ì¤€)

### âœ… ì™„ë£Œëœ Phase (Phase 1~6) - ì „ì²´ ì™„ë£Œ!

#### **Phase 1: ì˜ì¡´ì„± ì„¤ì • ë° ê³µí†µ ì¸í”„ë¼** âœ…
**ì™„ë£Œ í•­ëª©:**
- âœ… `build.gradle` ì˜ì¡´ì„± ì¶”ê°€ (Web, JPA, Validation, Cache, JWT, CSV)
- âœ… `application.properties` ì„¤ì • (MySQL, JPA, JWT, CSV ê²½ë¡œ)
- âœ… íŒ¨í‚¤ì§€ êµ¬ì¡° ìƒì„± (domain, dto, controller, service, repository, config, util, exception)
- âœ… `ApiResponse<T>` - í†µì¼ëœ API ì‘ë‹µ í˜•ì‹
- âœ… `ErrorCode` enum - ì—ëŸ¬ ì½”ë“œ ê´€ë¦¬
- âœ… `BusinessException` - ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸
- âœ… `GlobalExceptionHandler` - ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬ (@ControllerAdvice)
- âœ… `JwtUtil` - JWT í† í° ìƒì„±/ê²€ì¦ ìœ í‹¸ë¦¬í‹°
- âœ… `PasswordUtil` - SHA-256 ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”
- âœ… `CacheConfig` - Spring Cache ì„¤ì • (villages ìºì‹œ)

**íŒŒì¼ ìœ„ì¹˜:**
- `src/main/java/com/example/gacha/dto/response/ApiResponse.java`
- `src/main/java/com/example/gacha/exception/ErrorCode.java`
- `src/main/java/com/example/gacha/exception/BusinessException.java`
- `src/main/java/com/example/gacha/exception/GlobalExceptionHandler.java`
- `src/main/java/com/example/gacha/util/JwtUtil.java`
- `src/main/java/com/example/gacha/util/PasswordUtil.java`
- `src/main/java/com/example/gacha/config/CacheConfig.java`

---

#### **Phase 2: CSV ë°ì´í„° ì²˜ë¦¬** âœ…
**ì™„ë£Œ í•­ëª©:**
- âœ… `VillageDto` - CSV ë°ì´í„°ë¥¼ ë‹´ëŠ” DTO (villageId, villageName, sidoName, sigunguName, address, phoneNumber, latitude, longitude, programName, programContent)
- âœ… `VillageCsvReader` - CSV íŒŒì¼ ì½ê¸° ë° ìºì‹± (`@Cacheable`)
  - BOM ì œê±° ì²˜ë¦¬
  - í•„í„°ë§ ê¸°ëŠ¥ (ì§€ì—­, í”„ë¡œê·¸ë¨ ìœ í˜•)
  - EUC-KR ì¸ì½”ë”© ì„¤ì •
- âœ… `VillageService` - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
  - ì „ì²´/í•„í„°ë§ ì¡°íšŒ (í˜ì´ì§€ë„¤ì´ì…˜)
  - IDë¡œ ì¡°íšŒ
  - ëœë¤ ì„ íƒ (ê°€ì± ìš© í•µì‹¬ ë¡œì§)
- âœ… CSV íŒŒì¼ ì¤€ë¹„ (`src/main/resources/data/ì „êµ­ë†ì–´ì´Œì²´í—˜íœ´ì–‘ë§ˆì„í‘œì¤€ë°ì´í„°.csv`, 506KB, EUC-KR)

**íŒŒì¼ ìœ„ì¹˜:**
- `src/main/java/com/example/gacha/domain/village/VillageDto.java`
- `src/main/java/com/example/gacha/domain/village/VillageCsvReader.java`
- `src/main/java/com/example/gacha/domain/village/VillageService.java`

**ì¤‘ìš” ì„¤ì •:**
```properties
csv.file.path=classpath:data/ì „êµ­ë†ì–´ì´Œì²´í—˜íœ´ì–‘ë§ˆì„í‘œì¤€ë°ì´í„°.csv
csv.file.encoding=EUC-KR
```

---

#### **Phase 3: ì¸ì¦ ì‹œìŠ¤í…œ** âœ…
**ì™„ë£Œ í•­ëª©:**
- âœ… `User` Entity (userId, username, password, email, createdAt)
- âœ… `UserRepository` (findByUsername, existsByUsername, existsByEmail)
- âœ… `SignupRequest` - íšŒì›ê°€ì… ìš”ì²­ DTO (Validation í¬í•¨)
- âœ… `LoginRequest` - ë¡œê·¸ì¸ ìš”ì²­ DTO
- âœ… `AuthResponse` - ì¸ì¦ ì‘ë‹µ DTO (í† í° + ì‚¬ìš©ì ì •ë³´)
- âœ… `AuthService` - íšŒì›ê°€ì…, ë¡œê·¸ì¸, í† í° ê²€ì¦ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- âœ… `AuthController` - ì¸ì¦ API ì—”ë“œí¬ì¸íŠ¸
  - âœ… `POST /api/auth/signup` - íšŒì›ê°€ì…
  - âœ… `POST /api/auth/login` - ë¡œê·¸ì¸

**íŒŒì¼ ìœ„ì¹˜:**
- `src/main/java/com/example/gacha/domain/user/User.java`
- `src/main/java/com/example/gacha/domain/user/UserRepository.java`
- `src/main/java/com/example/gacha/dto/request/SignupRequest.java`
- `src/main/java/com/example/gacha/dto/request/LoginRequest.java`
- `src/main/java/com/example/gacha/dto/response/AuthResponse.java`
- `src/main/java/com/example/gacha/service/AuthService.java`
- `src/main/java/com/example/gacha/controller/AuthController.java`

---

#### **Phase 4: ê°€ì±  ì‹œìŠ¤í…œ** âœ… (í”„ë¡œì íŠ¸ í•µì‹¬!)
**ì™„ë£Œ í•­ëª©:**
- âœ… `GachaHistory` Entity (gachaId, userId, villageId, drawnAt)
  - ì¸ë±ìŠ¤: `idx_user_drawn_at`, `idx_user_id`
- âœ… `GachaHistoryRepository`
  - `countByUserIdAndDrawnAtAfter()` - í•˜ë£¨ 1íšŒ ì œí•œ í™•ì¸ìš©
  - `findByUserIdAndDrawnAtAfterOrderByDrawnAtDesc()` - ì˜¤ëŠ˜ ì´ë ¥ ì¡°íšŒ
- âœ… `GachaDrawRequest` - ê°€ì±  ìš”ì²­ DTO (region, programType í•„í„°)
- âœ… `VillageResponse` - ì—¬í–‰ì§€ ì‘ë‹µ DTO (isNew, drawnAt í¬í•¨)
- âœ… `GachaStatusResponse` - ê°€ì±  ìƒíƒœ ì‘ë‹µ DTO (canDraw, remainingCount, lastDrawTime, todayDrawCount)
- âœ… `GachaService` - ê°€ì±  í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
  - **drawGacha()**: í•˜ë£¨ 1íšŒ ì œí•œ í™•ì¸, ëœë¤ ì—¬í–‰ì§€ ì„ íƒ, ê°€ì±  ì´ë ¥ ì €ì¥, ì²˜ìŒ ë½‘ì€ ì—¬í–‰ì§€ì¸ì§€ í™•ì¸
  - **getGachaStatus()**: ì˜¤ëŠ˜ ê°€ì±  ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸
- âœ… `GachaController` - ê°€ì±  API ì—”ë“œí¬ì¸íŠ¸
  - âœ… `POST /api/gacha/draw` - ê°€ì±  ë½‘ê¸° (JWT ì¸ì¦, í•„í„°ë§ ì˜µì…˜)
  - âœ… `GET /api/gacha/status` - ê°€ì±  ìƒíƒœ í™•ì¸

**íŒŒì¼ ìœ„ì¹˜:**
- `src/main/java/com/example/gacha/domain/gacha/GachaHistory.java`
- `src/main/java/com/example/gacha/domain/gacha/GachaHistoryRepository.java`
- `src/main/java/com/example/gacha/dto/request/GachaDrawRequest.java`
- `src/main/java/com/example/gacha/dto/response/VillageResponse.java`
- `src/main/java/com/example/gacha/dto/response/GachaStatusResponse.java`
- `src/main/java/com/example/gacha/service/GachaService.java`
- `src/main/java/com/example/gacha/controller/GachaController.java`

**í•µì‹¬ ë¡œì§:**
```java
// í•˜ë£¨ 1íšŒ ì œí•œ í™•ì¸
LocalDateTime todayStart = LocalDateTime.now().withHour(0).withMinute(0).withSecond(0).withNano(0);
long todayCount = gachaHistoryRepository.countByUserIdAndDrawnAtAfter(userId, todayStart);
if (todayCount >= 1) {
    throw new BusinessException(ErrorCode.DAILY_LIMIT_EXCEEDED);
}
```

---

---

#### **Phase 5: ì»¬ë ‰ì…˜ & ì¶”ì–µ ì‹œìŠ¤í…œ** âœ…
**ì™„ë£Œ í•­ëª©:**

**Phase 5-1: ì»¬ë ‰ì…˜ ì‹œìŠ¤í…œ (7ê°œ ì»´í¬ë„ŒíŠ¸)**
- âœ… `Collection` Entity - userId, villageId, collectedAt, UNIQUE ì œì•½
- âœ… `CollectionRepository` - findByUserIdOrderByCollectedAtDesc, existsByUserIdAndVillageId, findByCollectionIdAndUserId, countByUserId
- âœ… `CollectionRequest` - villageId í•„ìˆ˜ ê²€ì¦
- âœ… `CollectionResponse` - Collection + VillageDto ì¡°í•©
- âœ… `CollectionStatsResponse` - totalCount, regionStats (Map<String, Long>)
- âœ… `CollectionService` - addCollection, getMyCollections, removeCollection, getCollectionStats (ë¹ˆ ì»¬ë ‰ì…˜ ì²˜ë¦¬ í¬í•¨)
- âœ… `CollectionController` - 4ê°œ API ì—”ë“œí¬ì¸íŠ¸
  - âœ… `POST /api/collections` - ì»¬ë ‰ì…˜ ì¶”ê°€
  - âœ… `GET /api/collections` - ë‚´ ì»¬ë ‰ì…˜ ì¡°íšŒ (í˜ì´ì§€ë„¤ì´ì…˜)
  - âœ… `DELETE /api/collections/{collectionId}` - ì»¬ë ‰ì…˜ ì œê±°
  - âœ… `GET /api/collections/stats` - í†µê³„ ì¡°íšŒ (ë¼ìš°íŒ… ìˆœì„œ ìˆ˜ì • ì™„ë£Œ)

**Phase 5-2: ì¶”ì–µ ì‹œìŠ¤í…œ (6ê°œ ì»´í¬ë„ŒíŠ¸)**
- âœ… `Memory` Entity - userId, villageId, content (TEXT), visitDate, createdAt, updatedAt
- âœ… `MemoryRepository` - findByUserIdOrderByCreatedAtDesc, findByMemoryIdAndUserId, countByUserId
- âœ… `MemoryRequest` - content (1~1000ì), villageId, visitDate (ì„ íƒ)
- âœ… `MemoryResponse` - Memory + VillageDto ì¡°í•©
- âœ… `MemoryService` - createMemory, getMyMemories, getMemoryById, updateMemory, deleteMemory (ê¶Œí•œ í™•ì¸ í¬í•¨)
- âœ… `MemoryController` - 5ê°œ API ì—”ë“œí¬ì¸íŠ¸
  - âœ… `POST /api/memories` - ì¶”ì–µ ì‘ì„±
  - âœ… `GET /api/memories` - ë‚´ ì¶”ì–µ ëª©ë¡ (í˜ì´ì§€ë„¤ì´ì…˜)
  - âœ… `GET /api/memories/{memoryId}` - ì¶”ì–µ ìƒì„¸ ì¡°íšŒ
  - âœ… `PUT /api/memories/{memoryId}` - ì¶”ì–µ ìˆ˜ì •
  - âœ… `DELETE /api/memories/{memoryId}` - ì¶”ì–µ ì‚­ì œ

**íŒŒì¼ ìœ„ì¹˜:**
- `src/main/java/com/example/gacha/domain/collection/`
- `src/main/java/com/example/gacha/domain/memory/`
- `src/main/java/com/example/gacha/dto/request/CollectionRequest.java`
- `src/main/java/com/example/gacha/dto/request/MemoryRequest.java`
- `src/main/java/com/example/gacha/dto/response/CollectionResponse.java`
- `src/main/java/com/example/gacha/dto/response/CollectionStatsResponse.java`
- `src/main/java/com/example/gacha/dto/response/MemoryResponse.java`
- `src/main/java/com/example/gacha/service/CollectionService.java`
- `src/main/java/com/example/gacha/service/MemoryService.java`
- `src/main/java/com/example/gacha/controller/CollectionController.java`
- `src/main/java/com/example/gacha/controller/MemoryController.java`

---

#### **Phase 6: ì—¬í–‰ì§€ & ë§ˆì´í˜ì´ì§€ API** âœ…
**ì™„ë£Œ í•­ëª©:**

**Phase 6-1: ì—¬í–‰ì§€ API (1ê°œ ì»¨íŠ¸ë¡¤ëŸ¬, 2ê°œ ì—”ë“œí¬ì¸íŠ¸)**
- âœ… `VillageController` - ì—¬í–‰ì§€ ì¡°íšŒ API
  - âœ… `GET /api/villages/{villageId}` - ì—¬í–‰ì§€ ìƒì„¸ ì¡°íšŒ (isCollected í¬í•¨, JWT ì„ íƒ)
  - âœ… `GET /api/villages` - ì—¬í–‰ì§€ ëª©ë¡ ì¡°íšŒ (í˜ì´ì§€ë„¤ì´ì…˜, í•„í„°ë§)
- âœ… `VillageResponse.from(VillageDto, boolean)` - isCollected ì§€ì› ì˜¤ë²„ë¡œë“œ ì¶”ê°€

**Phase 6-2: ë§ˆì´í˜ì´ì§€ API (4ê°œ ì»´í¬ë„ŒíŠ¸)**
- âœ… `UserResponse` - userId, username, email, createdAt, collectionCount, memoryCount
  - `from(User)` - ê¸°ë³¸ íŒ©í† ë¦¬ ë©”ì„œë“œ
  - `withStats(User, Long, Long)` - í†µê³„ í¬í•¨ íŒ©í† ë¦¬ ë©”ì„œë“œ
- âœ… `UserUpdateRequest` - email (ì´ë©”ì¼ í˜•ì‹ ê²€ì¦)
- âœ… `UserService` - getMyInfo, updateMyInfo
- âœ… `UserController` - 2ê°œ API ì—”ë“œí¬ì¸íŠ¸
  - âœ… `GET /api/users/me` - ë‚´ ì •ë³´ ì¡°íšŒ (í†µê³„ í¬í•¨)
  - âœ… `PUT /api/users/me` - ì´ë©”ì¼ ìˆ˜ì •

**íŒŒì¼ ìœ„ì¹˜:**
- `src/main/java/com/example/gacha/controller/VillageController.java`
- `src/main/java/com/example/gacha/controller/UserController.java`
- `src/main/java/com/example/gacha/dto/request/UserUpdateRequest.java`
- `src/main/java/com/example/gacha/dto/response/UserResponse.java`
- `src/main/java/com/example/gacha/service/UserService.java`

---

### ğŸ“‹ API êµ¬í˜„ í˜„í™© - ì „ì²´ ì™„ë£Œ! (17ê°œ / 17ê°œ)

#### âœ… ì¸ì¦ API (2ê°œ)
1. âœ… `POST /api/auth/signup` - íšŒì›ê°€ì…
2. âœ… `POST /api/auth/login` - ë¡œê·¸ì¸ (JWT í† í° ë°œê¸‰)

#### âœ… ê°€ì±  API (2ê°œ) â­ í•µì‹¬ ê¸°ëŠ¥
3. âœ… `POST /api/gacha/draw` - ê°€ì±  ë½‘ê¸° (í•˜ë£¨ 1íšŒ ì œí•œ, í•„í„°ë§)
4. âœ… `GET /api/gacha/status` - ê°€ì±  ìƒíƒœ í™•ì¸

#### âœ… ì—¬í–‰ì§€ API (2ê°œ)
5. âœ… `GET /api/villages/{villageId}` - ì—¬í–‰ì§€ ìƒì„¸ ì¡°íšŒ (ì»¬ë ‰ì…˜ ì—¬ë¶€ í¬í•¨)
6. âœ… `GET /api/villages` - ì—¬í–‰ì§€ ëª©ë¡ ì¡°íšŒ (í˜ì´ì§€ë„¤ì´ì…˜, í•„í„°ë§)

#### âœ… ì»¬ë ‰ì…˜ API (4ê°œ)
7. âœ… `POST /api/collections` - ì»¬ë ‰ì…˜ì— ì¶”ê°€
8. âœ… `GET /api/collections` - ë‚´ ì»¬ë ‰ì…˜ ì¡°íšŒ (í˜ì´ì§€ë„¤ì´ì…˜)
9. âœ… `DELETE /api/collections/{collectionId}` - ì»¬ë ‰ì…˜ ì œê±°
10. âœ… `GET /api/collections/stats` - ì»¬ë ‰ì…˜ í†µê³„ (ì§€ì—­ë³„ ì§‘ê³„)

#### âœ… ì¶”ì–µ API (5ê°œ)
11. âœ… `POST /api/memories` - ì¶”ì–µ ì‘ì„±
12. âœ… `GET /api/memories` - ë‚´ ì¶”ì–µ ëª©ë¡ (í˜ì´ì§€ë„¤ì´ì…˜)
13. âœ… `GET /api/memories/{memoryId}` - ì¶”ì–µ ìƒì„¸ ì¡°íšŒ
14. âœ… `PUT /api/memories/{memoryId}` - ì¶”ì–µ ìˆ˜ì •
15. âœ… `DELETE /api/memories/{memoryId}` - ì¶”ì–µ ì‚­ì œ

#### âœ… ë§ˆì´í˜ì´ì§€ API (2ê°œ)
16. âœ… `GET /api/users/me` - ë‚´ ì •ë³´ ì¡°íšŒ (í†µê³„ í¬í•¨)
17. âœ… `PUT /api/users/me` - ë‚´ ì •ë³´ ìˆ˜ì • (ì´ë©”ì¼)

---

### ğŸš€ ë‹¤ìŒ ë‹¨ê³„: Phase 5 - ì»¬ë ‰ì…˜ & ì¶”ì–µ êµ¬í˜„

#### Phase 5-1: ì»¬ë ‰ì…˜ ì‹œìŠ¤í…œ
**êµ¬í˜„í•  ë‚´ìš©:**
1. **Collection Entity** ìƒì„±
   - `collectionId` (PK)
   - `userId` (FK)
   - `villageId` (CSV ID ì°¸ì¡°, ì™¸ë˜í‚¤ ì œì•½ ì—†ìŒ)
   - `collectedAt` (ìˆ˜ì§‘ ì¼ì‹œ)
   - **UNIQUE ì œì•½**: `(user_id, village_id)` - ì¤‘ë³µ ë°©ì§€

2. **CollectionRepository** ìƒì„±
   - `findByUserIdOrderByCollectedAtDesc()` - ì‚¬ìš©ìì˜ ì»¬ë ‰ì…˜ ì¡°íšŒ
   - `existsByUserIdAndVillageId()` - ì¤‘ë³µ í™•ì¸
   - `deleteByCollectionIdAndUserId()` - ê¶Œí•œ í™•ì¸ í›„ ì‚­ì œ
   - `countByUserId()` - ì‚¬ìš©ìì˜ ì´ ì»¬ë ‰ì…˜ ê°œìˆ˜

3. **CollectionRequest** DTO
   - `villageId` (í•„ìˆ˜)

4. **CollectionResponse** DTO
   - `collectionId`, `villageId`, `villageName`, `sidoName`, `sigunguName`, `address`, `collectedAt`
   - VillageDtoì™€ ì¡°í•©í•˜ì—¬ ì‘ë‹µ

5. **CollectionStatsResponse** DTO
   - `totalCount` - ì „ì²´ ì»¬ë ‰ì…˜ ê°œìˆ˜
   - `regionStats` - Map<String, Long> ì§€ì—­ë³„ í†µê³„ (ì˜ˆ: {"ê²½ìƒë‚¨ë„": 5, "ì „ë¼ë¶ë„": 3})

6. **CollectionService** ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
   - `addCollection()` - ì»¬ë ‰ì…˜ ì¶”ê°€ (ì¤‘ë³µ ì²´í¬)
   - `getMyCollections()` - ë‚´ ì»¬ë ‰ì…˜ ì¡°íšŒ (í˜ì´ì§€ë„¤ì´ì…˜)
   - `removeCollection()` - ì»¬ë ‰ì…˜ ì œê±° (ê¶Œí•œ í™•ì¸)
   - `getCollectionStats()` - ì§€ì—­ë³„ í†µê³„ ê³„ì‚°

7. **CollectionController** API
   - `POST /api/collections` - ì»¬ë ‰ì…˜ ì¶”ê°€
   - `GET /api/collections` - ë‚´ ì»¬ë ‰ì…˜ ì¡°íšŒ
   - `DELETE /api/collections/{collectionId}` - ì»¬ë ‰ì…˜ ì œê±°
   - `GET /api/collections/stats` - í†µê³„ ì¡°íšŒ

**íŒŒì¼ ìƒì„± ìœ„ì¹˜:**
```
src/main/java/com/example/gacha/
â”œâ”€â”€ domain/collection/
â”‚   â”œâ”€â”€ Collection.java (Entity)
â”‚   â”œâ”€â”€ CollectionRepository.java
â”‚   â””â”€â”€ CollectionService.java
â”œâ”€â”€ dto/request/
â”‚   â””â”€â”€ CollectionRequest.java
â”œâ”€â”€ dto/response/
â”‚   â”œâ”€â”€ CollectionResponse.java
â”‚   â””â”€â”€ CollectionStatsResponse.java
â””â”€â”€ controller/
    â””â”€â”€ CollectionController.java
```

**ERD ì°¸ê³ :**
```sql
CREATE TABLE collections (
    collection_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id BIGINT NOT NULL,
    village_id BIGINT NOT NULL,
    collected_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE,
    UNIQUE KEY unique_user_village (user_id, village_id)
);
```

---

#### Phase 5-2: ì¶”ì–µ ì‹œìŠ¤í…œ
**êµ¬í˜„í•  ë‚´ìš©:**
1. **Memory Entity** ìƒì„±
   - `memoryId` (PK)
   - `userId` (FK)
   - `villageId` (CSV ID ì°¸ì¡°)
   - `content` (TEXT, ìµœëŒ€ 1000ì)
   - `visitDate` (ë°©ë¬¸ ë‚ ì§œ, ì„ íƒì‚¬í•­)
   - `createdAt`, `updatedAt`

2. **MemoryRepository** ìƒì„±
   - `findByUserIdOrderByCreatedAtDesc()` - ì‚¬ìš©ìì˜ ì¶”ì–µ ëª©ë¡
   - `findByMemoryIdAndUserId()` - ê¶Œí•œ í™•ì¸ìš©
   - `countByUserId()` - ì‚¬ìš©ìì˜ ì´ ì¶”ì–µ ê°œìˆ˜

3. **MemoryRequest** DTO (ì‘ì„±/ìˆ˜ì •ìš©)
   - `villageId` (í•„ìˆ˜, ì‘ì„± ì‹œì—ë§Œ)
   - `content` (í•„ìˆ˜, 1~1000ì)
   - `visitDate` (ì„ íƒ, YYYY-MM-DD í˜•ì‹)

4. **MemoryResponse** DTO
   - `memoryId`, `villageId`, `villageName`, `sidoName`, `sigunguName`, `address`, `content`, `visitDate`, `createdAt`, `updatedAt`

5. **MemoryService** ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
   - `createMemory()` - ì¶”ì–µ ì‘ì„± (villageId ìœ íš¨ì„± ê²€ì¦)
   - `getMyMemories()` - ë‚´ ì¶”ì–µ ëª©ë¡ (í˜ì´ì§€ë„¤ì´ì…˜)
   - `getMemoryById()` - ì¶”ì–µ ìƒì„¸ ì¡°íšŒ (ê¶Œí•œ í™•ì¸)
   - `updateMemory()` - ì¶”ì–µ ìˆ˜ì • (ê¶Œí•œ í™•ì¸)
   - `deleteMemory()` - ì¶”ì–µ ì‚­ì œ (ê¶Œí•œ í™•ì¸)

6. **MemoryController** API
   - `POST /api/memories` - ì¶”ì–µ ì‘ì„±
   - `GET /api/memories` - ë‚´ ì¶”ì–µ ëª©ë¡
   - `GET /api/memories/{memoryId}` - ì¶”ì–µ ìƒì„¸
   - `PUT /api/memories/{memoryId}` - ì¶”ì–µ ìˆ˜ì •
   - `DELETE /api/memories/{memoryId}` - ì¶”ì–µ ì‚­ì œ

**íŒŒì¼ ìƒì„± ìœ„ì¹˜:**
```
src/main/java/com/example/gacha/
â”œâ”€â”€ domain/memory/
â”‚   â”œâ”€â”€ Memory.java (Entity)
â”‚   â”œâ”€â”€ MemoryRepository.java
â”‚   â””â”€â”€ MemoryService.java
â”œâ”€â”€ dto/request/
â”‚   â””â”€â”€ MemoryRequest.java
â”œâ”€â”€ dto/response/
â”‚   â””â”€â”€ MemoryResponse.java
â””â”€â”€ controller/
    â””â”€â”€ MemoryController.java
```

**ERD ì°¸ê³ :**
```sql
CREATE TABLE memories (
    memory_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id BIGINT NOT NULL,
    village_id BIGINT NOT NULL,
    content TEXT NOT NULL,
    visit_date DATE,
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE
);
```

---

### ğŸ¯ Phase 6 - ë§ˆì´í˜ì´ì§€ & ì—¬í–‰ì§€ API êµ¬í˜„

#### Phase 6-1: ì—¬í–‰ì§€ API
**êµ¬í˜„í•  ë‚´ìš©:**
1. **VillageController** ìƒì„±
   - `GET /api/villages/{villageId}` - ì—¬í–‰ì§€ ìƒì„¸ ì¡°íšŒ
     - VillageServiceì˜ `getVillageById()` í™œìš©
     - ì»¬ë ‰ì…˜ ì—¬ë¶€ (isCollected) í¬í•¨
   - `GET /api/villages` - ì—¬í–‰ì§€ ëª©ë¡ ì¡°íšŒ
     - í˜ì´ì§€ë„¤ì´ì…˜ (`page`, `size`)
     - í•„í„°ë§ (`region`, `programType`)
     - VillageServiceì˜ `getAllVillages()` í™œìš©

**íŒŒì¼ ìƒì„± ìœ„ì¹˜:**
```
src/main/java/com/example/gacha/controller/
â””â”€â”€ VillageController.java
```

---

#### Phase 6-2: ë§ˆì´í˜ì´ì§€ API
**êµ¬í˜„í•  ë‚´ìš©:**
1. **UserResponse** DTO (ë§ˆì´í˜ì´ì§€ìš©)
   - `userId`, `username`, `email`, `createdAt`
   - `collectionCount` - ì»¬ë ‰ì…˜ ê°œìˆ˜
   - `memoryCount` - ì¶”ì–µ ê°œìˆ˜

2. **UserUpdateRequest** DTO
   - `email` (ì„ íƒ, ì´ë©”ì¼ í˜•ì‹ ê²€ì¦)

3. **UserService** ìƒì„±
   - `getMyInfo()` - ë‚´ ì •ë³´ ì¡°íšŒ (í†µê³„ í¬í•¨)
   - `updateMyInfo()` - ë‚´ ì •ë³´ ìˆ˜ì •

4. **UserController** ìƒì„±
   - `GET /api/users/me` - ë‚´ ì •ë³´ ì¡°íšŒ
   - `PUT /api/users/me` - ë‚´ ì •ë³´ ìˆ˜ì •

**íŒŒì¼ ìƒì„± ìœ„ì¹˜:**
```
src/main/java/com/example/gacha/
â”œâ”€â”€ dto/request/
â”‚   â””â”€â”€ UserUpdateRequest.java
â”œâ”€â”€ dto/response/
â”‚   â””â”€â”€ UserResponse.java
â”œâ”€â”€ service/
â”‚   â””â”€â”€ UserService.java
â””â”€â”€ controller/
    â””â”€â”€ UserController.java
```

---

### ğŸ”§ êµ¬í˜„ ì‹œ ì£¼ì˜ì‚¬í•­

#### ê³µí†µ ê·œì¹™
1. **Entity í´ë˜ìŠ¤**
   - `@Entity`, `@Table`, `@Getter`, `@Setter`, `@NoArgsConstructor`, `@AllArgsConstructor`, `@Builder` ì‚¬ìš©
   - `@CreationTimestamp`, `@UpdateTimestamp` í™œìš©
   - `@Id`, `@GeneratedValue(strategy = GenerationType.IDENTITY)`

2. **Repository**
   - `JpaRepository<Entity, ID>` ìƒì†
   - ë©”ì„œë“œ ë„¤ì´ë° ê·œì¹™ ì¤€ìˆ˜ (findBy, existsBy, countBy ë“±)

3. **Service**
   - `@Service`, `@RequiredArgsConstructor`, `@Transactional(readOnly = true)`
   - ì“°ê¸° ë©”ì„œë“œì—ë§Œ `@Transactional` ì¶”ê°€
   - `BusinessException`ìœ¼ë¡œ ì˜ˆì™¸ ì²˜ë¦¬

4. **Controller**
   - `@RestController`, `@RequestMapping("/api/...")`
   - JWT ì¸ì¦: `@RequestHeader("Authorization") String authorization`
   - ëª¨ë“  ì‘ë‹µì€ `ApiResponse<T>`ë¡œ ë˜í•‘

#### ê¶Œí•œ í™•ì¸
- ì»¬ë ‰ì…˜ ì‚­ì œ: `collectionId` + `userId` í™•ì¸
- ì¶”ì–µ ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œ: `memoryId` + `userId` í™•ì¸
- ê¶Œí•œ ì—†ìœ¼ë©´ `ErrorCode.FORBIDDEN` ë°œìƒ

#### villageId ê²€ì¦
- ì»¬ë ‰ì…˜ ì¶”ê°€/ì¶”ì–µ ì‘ì„± ì‹œ `villageService.getVillageById(villageId)` í˜¸ì¶œí•˜ì—¬ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
- ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ `ErrorCode.VILLAGE_NOT_FOUND` ë°œìƒ

---

### ğŸ“¦ ìµœì¢… í”„ë¡œì íŠ¸ êµ¬ì¡° - ì „ì²´ ì™„ë£Œ!

```
src/main/java/com/example/gacha/
â”œâ”€â”€ GachaApplication.java
â”œâ”€â”€ config/
â”‚   â””â”€â”€ CacheConfig.java âœ…
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ user/
â”‚   â”‚   â”œâ”€â”€ User.java âœ…
â”‚   â”‚   â””â”€â”€ UserRepository.java âœ…
â”‚   â”œâ”€â”€ village/
â”‚   â”‚   â”œâ”€â”€ VillageDto.java âœ…
â”‚   â”‚   â”œâ”€â”€ VillageCsvReader.java âœ…
â”‚   â”‚   â””â”€â”€ VillageService.java âœ…
â”‚   â”œâ”€â”€ gacha/
â”‚   â”‚   â”œâ”€â”€ GachaHistory.java âœ…
â”‚   â”‚   â””â”€â”€ GachaHistoryRepository.java âœ…
â”‚   â”œâ”€â”€ collection/
â”‚   â”‚   â”œâ”€â”€ Collection.java âœ…
â”‚   â”‚   â””â”€â”€ CollectionRepository.java âœ…
â”‚   â””â”€â”€ memory/
â”‚       â”œâ”€â”€ Memory.java âœ…
â”‚       â””â”€â”€ MemoryRepository.java âœ…
â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ request/
â”‚   â”‚   â”œâ”€â”€ SignupRequest.java âœ…
â”‚   â”‚   â”œâ”€â”€ LoginRequest.java âœ…
â”‚   â”‚   â”œâ”€â”€ GachaDrawRequest.java âœ…
â”‚   â”‚   â”œâ”€â”€ CollectionRequest.java âœ…
â”‚   â”‚   â”œâ”€â”€ MemoryRequest.java âœ…
â”‚   â”‚   â””â”€â”€ UserUpdateRequest.java âœ…
â”‚   â””â”€â”€ response/
â”‚       â”œâ”€â”€ ApiResponse.java âœ…
â”‚       â”œâ”€â”€ AuthResponse.java âœ…
â”‚       â”œâ”€â”€ VillageResponse.java âœ…
â”‚       â”œâ”€â”€ GachaStatusResponse.java âœ…
â”‚       â”œâ”€â”€ CollectionResponse.java âœ…
â”‚       â”œâ”€â”€ CollectionStatsResponse.java âœ…
â”‚       â”œâ”€â”€ MemoryResponse.java âœ…
â”‚       â””â”€â”€ UserResponse.java âœ…
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ AuthService.java âœ…
â”‚   â”œâ”€â”€ GachaService.java âœ…
â”‚   â”œâ”€â”€ CollectionService.java âœ…
â”‚   â”œâ”€â”€ MemoryService.java âœ…
â”‚   â””â”€â”€ UserService.java âœ…
â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ AuthController.java âœ…
â”‚   â”œâ”€â”€ GachaController.java âœ…
â”‚   â”œâ”€â”€ VillageController.java âœ…
â”‚   â”œâ”€â”€ CollectionController.java âœ…
â”‚   â”œâ”€â”€ MemoryController.java âœ…
â”‚   â””â”€â”€ UserController.java âœ…
â”œâ”€â”€ util/
â”‚   â”œâ”€â”€ JwtUtil.java âœ… (JJWT 0.11.5 ìµœì‹  API)
â”‚   â””â”€â”€ PasswordUtil.java âœ…
â””â”€â”€ exception/
    â”œâ”€â”€ ErrorCode.java âœ…
    â”œâ”€â”€ BusinessException.java âœ…
    â””â”€â”€ GlobalExceptionHandler.java âœ…
```

---

### ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ (Phase 6 ì™„ë£Œ í›„)

#### ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸
1. **íšŒì›ê°€ì…** â†’ `POST /api/auth/signup`
2. **ë¡œê·¸ì¸** â†’ `POST /api/auth/login` (í† í° íšë“)
3. **ê°€ì±  ë½‘ê¸°** â†’ `POST /api/gacha/draw` (ëœë¤ ì—¬í–‰ì§€ íšë“)
4. **ì»¬ë ‰ì…˜ ì¶”ê°€** â†’ `POST /api/collections`
5. **ê°€ì±  ìƒíƒœ í™•ì¸** â†’ `GET /api/gacha/status` (canDraw: false)
6. **ë‚´ ì»¬ë ‰ì…˜ ì¡°íšŒ** â†’ `GET /api/collections`
7. **ì—¬í–‰ì§€ ìƒì„¸ ì¡°íšŒ** â†’ `GET /api/villages/{villageId}`
8. **ì¶”ì–µ ì‘ì„±** â†’ `POST /api/memories`
9. **ë‚´ ì¶”ì–µ ì¡°íšŒ** â†’ `GET /api/memories`
10. **ë§ˆì´í˜ì´ì§€** â†’ `GET /api/users/me` (í†µê³„ í™•ì¸)
11. **ì»¬ë ‰ì…˜ í†µê³„** â†’ `GET /api/collections/stats` (ì§€ì—­ë³„ í†µê³„)
12. **ì¶”ì–µ ìˆ˜ì •** â†’ `PUT /api/memories/{memoryId}`
13. **ì¶”ì–µ ì‚­ì œ** â†’ `DELETE /api/memories/{memoryId}`
14. **ì»¬ë ‰ì…˜ ì œê±°** â†’ `DELETE /api/collections/{collectionId}`

---

### ğŸ’¡ ê°œë°œ íŒ

#### JWT í† í° ì‚¬ìš©ë²•
```java
// Controllerì—ì„œ í† í° ì¶”ì¶œ ë° ì‚¬ìš©ì ID íšë“
String token = jwtUtil.extractToken(authorization);
Long userId = jwtUtil.getUserIdFromToken(token);
```

#### í˜ì´ì§€ë„¤ì´ì…˜ ì²˜ë¦¬
```java
// Controllerì—ì„œ Pageable ë°›ê¸°
@GetMapping
public ApiResponse<Page<CollectionResponse>> getMyCollections(
    @RequestHeader("Authorization") String authorization,
    @RequestParam(defaultValue = "0") int page,
    @RequestParam(defaultValue = "20") int size
) {
    Pageable pageable = PageRequest.of(page, size);
    // ...
}
```

#### VillageDtoì™€ Response DTO ì¡°í•©
```java
// Serviceì—ì„œ VillageDtoë¥¼ ê°€ì ¸ì™€ì„œ Response DTOì— ë§¤í•‘
VillageDto village = villageService.getVillageById(villageId);
CollectionResponse response = CollectionResponse.builder()
    .collectionId(collection.getCollectionId())
    .villageId(village.getVillageId())
    .villageName(village.getVillageName())
    .sidoName(village.getSidoName())
    .collectedAt(collection.getCollectedAt())
    .build();
```

---

### ğŸ“Š ì§„í–‰ë¥  ìš”ì•½ - í”„ë¡œì íŠ¸ 100% ì™„ë£Œ!

| Phase | ì§„í–‰ë¥  | ì™„ë£Œ í•­ëª© | ìƒíƒœ |
|-------|--------|----------|------|
| Phase 1 | 100% | ê³µí†µ ì¸í”„ë¼ 10ê°œ | âœ… ì™„ë£Œ |
| Phase 2 | 100% | CSV ì²˜ë¦¬ 3ê°œ | âœ… ì™„ë£Œ |
| Phase 3 | 100% | ì¸ì¦ 7ê°œ | âœ… ì™„ë£Œ |
| Phase 4 | 100% | ê°€ì±  7ê°œ | âœ… ì™„ë£Œ |
| Phase 5 | 100% | ì»¬ë ‰ì…˜ 7ê°œ + ì¶”ì–µ 6ê°œ | âœ… ì™„ë£Œ |
| Phase 6 | 100% | ì—¬í–‰ì§€ 2ê°œ + ë§ˆì´í˜ì´ì§€ 4ê°œ | âœ… ì™„ë£Œ |
| **ì „ì²´** | **100%** | **46ê°œ ì»´í¬ë„ŒíŠ¸** | âœ… ì „ì²´ ì™„ë£Œ |

**API ì™„ì„±ë„:** 17/17 (100%)

---

### ğŸ–ï¸ í•µì‹¬ ì„±ê³¼

1. âœ… **ê°€ì±  ì‹œìŠ¤í…œ ì™„ì„±** - í”„ë¡œì íŠ¸ì˜ í•µì‹¬ ê¸°ëŠ¥! (í•˜ë£¨ 1íšŒ ì œí•œ, í•„í„°ë§)
2. âœ… **ì»¬ë ‰ì…˜ ì‹œìŠ¤í…œ** - ì¤‘ë³µ ë°©ì§€, ì§€ì—­ë³„ í†µê³„, í˜ì´ì§€ë„¤ì´ì…˜
3. âœ… **ì¶”ì–µ ì‹œìŠ¤í…œ** - CRUD ì™„ì„±, ê¶Œí•œ ê´€ë¦¬, ë°©ë¬¸ ë‚ ì§œ ê¸°ë¡
4. âœ… **ë§ˆì´í˜ì´ì§€** - ì‚¬ìš©ì ì •ë³´ + í†µê³„ (ì»¬ë ‰ì…˜ ìˆ˜, ì¶”ì–µ ìˆ˜)
5. âœ… **CSV ê¸°ë°˜ ë°ì´í„°** - ê³µê³µë°ì´í„° í™œìš©, ìºì‹±ìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™”
6. âœ… **JWT ì¸ì¦** - JJWT 0.11.5 ìµœì‹  API ì ìš©, SecretKey ê¸°ë°˜
7. âœ… **í†µì¼ëœ ì‘ë‹µ í˜•ì‹** - `ApiResponse<T>`ë¡œ ì¼ê´€ì„± ìœ ì§€
8. âœ… **ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬** - `@ControllerAdvice`ë¡œ ê¹”ë”í•œ ì—ëŸ¬ í•¸ë“¤ë§
9. âœ… **ê²½ë¡œ ë¼ìš°íŒ… ìµœì í™”** - êµ¬ì²´ì  ê²½ë¡œ ìš°ì„  ë§¤ì¹­

---

### ğŸ”§ ì£¼ìš” ê¸°ìˆ ì  í•´ê²° ì‚¬í•­

#### 1. JWT ì¸ì¦ ê°œì„  (JJWT 0.11.5 ìµœì‹  API)
**ë¬¸ì œ**: ì´ˆê¸° êµ¬í˜„ì—ì„œ deprecated API ì‚¬ìš©ìœ¼ë¡œ Base64 ë””ì½”ë”© ì˜¤ë¥˜ ë°œìƒ
**í•´ê²°**:
```java
// ê¸°ì¡´ (deprecated)
.signWith(SignatureAlgorithm.HS512, secret)

// ê°œì„  í›„
private SecretKey getSigningKey() {
    byte[] keyBytes = secret.getBytes(StandardCharsets.UTF_8);
    return Keys.hmacShaKeyFor(keyBytes);
}
.signWith(getSigningKey())
```

#### 2. Spring MVC ê²½ë¡œ ë§¤ì¹­ ìˆœì„œ ìµœì í™”
**ë¬¸ì œ**: `/api/collections/stats` í˜¸ì¶œ ì‹œ ì •ì  ë¦¬ì†ŒìŠ¤ ì˜¤ë¥˜ ë°œìƒ
**ì›ì¸**: `@GetMapping("/stats")`ê°€ `@DeleteMapping("/{collectionId}")` ë’¤ì— ì„ ì–¸ë¨
**í•´ê²°**: êµ¬ì²´ì ì¸ ê²½ë¡œë¥¼ ê²½ë¡œ ë³€ìˆ˜ë³´ë‹¤ ë¨¼ì € ì„ ì–¸
```java
@GetMapping("/stats")      // 1. êµ¬ì²´ì  ê²½ë¡œ ìš°ì„ 
@GetMapping                 // 2. ê¸°ë³¸ ê²½ë¡œ
@DeleteMapping("/{collectionId}")  // 3. ê²½ë¡œ ë³€ìˆ˜ ë§ˆì§€ë§‰
```

#### 3. ì»¬ë ‰ì…˜ í†µê³„ ë¹ˆ ë°ì´í„° ì²˜ë¦¬
**ë¬¸ì œ**: ì»¬ë ‰ì…˜ì´ ì—†ì„ ë•Œ Stream groupingByì—ì„œ ì˜¤ë¥˜ ê°€ëŠ¥ì„±
**í•´ê²°**: ë¹ˆ ì»¬ë ‰ì…˜ ëª…ì‹œì  ì²˜ë¦¬
```java
if (collections.isEmpty()) {
    regionStats = new HashMap<>();
    log.info("No collections found, returning empty stats");
} else {
    regionStats = collections.stream()
        .map(collection -> {...})
        .collect(Collectors.groupingBy(...));
}
```

---

**í”„ë¡œì íŠ¸ ì™„ë£Œ!**
ì „ì²´ 17ê°œ API ì—”ë“œí¬ì¸íŠ¸ê°€ ì •ìƒ ì‘ë™í•˜ë©°, ê°€ì±  ì—¬í–‰ ì„œë¹„ìŠ¤ì˜ ëª¨ë“  í•µì‹¬ ê¸°ëŠ¥ì´ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤.
Postman í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ APIë¥¼ í™•ì¸í•˜ê³ , í”„ë¡ íŠ¸ì—”ë“œì™€ ì—°ë™í•˜ì„¸ìš”! ğŸ‰

